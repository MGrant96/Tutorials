"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.SocketServerModule = void 0;
var socket_io_1 = __importDefault(require("socket.io"));
var arls_logger_1 = __importDefault(require("arls-logger"));
var SocketServerModule = /** @class */ (function () {
    function SocketServerModule() {
        this.totalClients = 0;
    }
    SocketServerModule.prototype.connect = function (httpServer, cb) {
        var _this = this;
        this.socket = socket_io_1.default(httpServer);
        this.socket.on("connection", function (client) {
            _this.totalClients++;
            arls_logger_1.default.info('SocketServer', "Client connected: " + client.id + ", total clients: " + _this.totalClients);
            client.once("disconnect", function () {
                _this.totalClients--;
                arls_logger_1.default.info('SocketServer', "Client disconnected: " + client.id + ", total clients: " + _this.totalClients);
            });
        });
        if (cb)
            cb();
    };
    return SocketServerModule;
}());
exports.SocketServerModule = SocketServerModule;
